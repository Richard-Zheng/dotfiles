{{ if eq .chezmoi.osRelease.id "arch" -}}
#!/bin/bash

# Exit immediately if a command exits with a non-zero status
set -e

echo "======================================================="
echo "Detected Arch Linux, starting automated setup..."
echo "======================================================="

# ---------------------------------------------------------
# 1. Core Packages Installation (Official Repositories)
# ---------------------------------------------------------
echo "[1/2] Installing packages from official repositories..."

# Grouped packages array for easier maintenance
PACKAGES=(
  # for i3blocks
  acpi lm_sensors sysstat bc alsa-utils

  # Terminal utilities and fonts
  zsh zsh-completions fzf
  noto-fonts-cjk ttf-firacode-nerd ttf-fira-sans ttf-nerd-fonts-symbols

  # Neovim and development dependencies
  neovim python-neovim git lazygit tree-sitter-cli curl xclip unzip base-devel ripgrep fd
  tmux

  # System utilities
  btrfs-progs
)

# Batch install all packages
sudo pacman -S --needed --noconfirm "${PACKAGES[@]}"

# ---------------------------------------------------------
# 2. Enable System Services
# ---------------------------------------------------------
echo "[2/2] Enabling system services for autostart..."
sudo systemctl enable NetworkManager

echo "======================================================="
echo "Arch Linux basic setup completed successfully!"
echo "======================================================="

{{ end -}}
